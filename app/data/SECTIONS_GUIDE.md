# Руководство по заполнению sections.yaml

Файл `sections.yaml` задаёт приветствие, текст «О нас» и дерево разделов бота. Все тексты и картинки редактируются только здесь — после изменений перезапустите бота.

---

## Структура файла

Три основных блока (порядок важен):

1. **welcome** — экран после команды /start  
2. **info** — страница команды /info («О нас»)  
3. **sections** — дерево разделов и подразделов (кнопки меню)

---

## 1. Блок welcome

Используется на главном экране после /start.

```yaml
welcome:
  text: "Добро пожаловать! Выберите раздел в меню ниже."
  image_path: ""
  image_url: ""
```

| Поле         | Обязательно | Описание |
|--------------|-------------|----------|
| **text**     | Да          | Текст приветствия. Поддерживается HTML (перенос строки: `\n`). |
| **image_path** | Нет       | Путь к файлу картинки в проекте (относительно корня проекта). Один файл. Пустая строка `""` — без картинки. |
| **image_url**  | Нет       | Прямая ссылка на картинку (http/https). Один URL. Если указаны оба, приоритет у image_path. |

Пример с картинкой по пути:
```yaml
welcome:
  text: "Добро пожаловать!"
  image_path: "images/welcome.png"
  image_url: ""
```

Пример с картинкой по URL:
```yaml
welcome:
  text: "Добро пожаловать!"
  image_path: ""
  image_url: "https://example.com/logo.jpg"
```

---

## 2. Блок info

Текст для команды /info («О нас»).

```yaml
info:
  text: "О нас. Здесь можно разместить информацию о проекте или организации."
```

Поле **text** обязательно. Картинки в блоке info не поддерживаются.

---

## 3. Блок sections — дерево разделов

Список разделов верхнего уровня. У каждого раздела могут быть подразделы (children).

### Обязательные поля у каждого раздела

| Поле        | Тип   | Описание |
|-------------|-------|----------|
| **id**      | строка | Уникальный идентификатор. Формат: `"1"`, `"2"`, `"1_1"`, `"1_2"`, `"2_3"` и т.д. |
| **title**   | строка | Текст кнопки в меню. |
| **text**    | строка | Текст сообщения при входе в раздел. |
| **children** | список | Вложенные подразделы. Для конечного раздела — пустой список `[]`. |

### Правила для id

- Всегда в кавычках: `"1"`, `"1_1"`.
- Верхний уровень: `"1"`, `"2"`, `"3"`, `"4"`, `"5"`.
- Подраздел раздела 1: `"1_1"`, `"1_2"`, `"1_3"`.
- Подраздел раздела 2: `"2_1"`, `"2_2"`, … `"2_5"`.
- У каждого id должен быть один родитель; повторять id в разных ветках нельзя.

### Пример раздела без подразделов

```yaml
- id: "5_1"
  title: "Подраздел 5.1"
  text: "Текст подраздела 5.1."
  children: []
```

### Пример раздела с подразделами

```yaml
- id: "1"
  title: "Раздел 1"
  text: "Описание раздела 1. Выберите подраздел."
  children:
    - id: "1_1"
      title: "Подраздел 1.1"
      text: "Текст подраздела 1.1."
      children: []
    - id: "1_2"
      title: "Подраздел 1.2"
      text: "Текст подраздела 1.2."
      children: []
```

---

## 4. Картинки в разделах (images)

В любом разделе (и у приветствия через image_path/image_url) можно указать картинки.

### Поле images в разделах

- Необязательное.
- Список из **не более 3 элементов**.
- Каждый элемент — либо **URL**, либо **путь к файлу** в проекте.
- Используются только первые 3 непустых значения.

Форматы:

- **URL** — строка, начинающаяся с `http://` или `https://`. Подставляется в запрос как есть.
- **Файл в проекте** — путь относительно **корня проекта** (папка, в которой лежит каталог `app/`). Можно с подпапками.

### Как задаётся путь к файлу

- Корень проекта — это каталог с папкой `app/` (например, `info_bot/`).
- Примеры путей:
  - `images/photo.jpg`  — файл `images/photo.jpg` в корне проекта
  - `app/data/pic.png` — файл в подпапке
  - `static/logo.png`  — файл в папке `static/` в корне проекта
- Абсолютный путь (например, `/home/user/pic.jpg` или `C:\Images\pic.jpg`) тоже допускается.

### Примеры images

Без картинок (поле можно не писать или оставить пустой список):

```yaml
- id: "1_1"
  title: "Подраздел 1.1"
  text: "Текст подраздела 1.1."
  children: []
```

Одна картинка — URL:

```yaml
- id: "1_1"
  title: "Подраздел 1.1"
  text: "Текст подраздела 1.1."
  images: ["https://example.com/image.jpg"]
  children: []
```

Одна картинка — файл в проекте:

```yaml
- id: "1_1"
  title: "Подраздел 1.1"
  text: "Текст подраздела 1.1."
  images: ["images/section1_1.png"]
  children: []
```

Две или три картинки (URL и путь можно комбинировать):

```yaml
- id: "2_1"
  title: "Подраздел 2.1"
  text: "Текст с несколькими фото."
  images:
    - "https://example.com/1.jpg"
    - "images/local_photo.png"
    - "https://example.com/3.jpg"
  children: []
```

Больше трёх элементов в списке указывать не нужно — будут использованы только первые три.

### Как отображаются картинки в боте

- **0 картинок** — одно сообщение с текстом и кнопками.
- **1 картинка** — одно сообщение: фото, подпись (текст раздела) и кнопки.
- **2 или 3 картинки** — сначала отправляется группа из 2–3 фото, под ним — отдельное сообщение с текстом и кнопками.

---

## 5. Синтаксис YAML — важные моменты

- **Отступы** — только пробелы (рекомендуется 2 пробела), без табуляции.
- **Строки** лучше в кавычках, если есть спецсимволы (`:`, `#`, `[`, `]`, кавычки, переносы). Обычный текст можно и без кавычек.
- **Многострочный текст** — через `|` или `>`, либо `\n` внутри одной строки в кавычках.
- **Список** — элементы с дефисом и пробелом `- `, с тем же отступом.
- **Пустая строка** в значении — `""` или `''`.

Пример с переносом строки в text:

```yaml
text: "Первая строка.\nВторая строка."
```

---

## 6. Полный пример фрагмента с картинками

```yaml
sections:
  - id: "1"
    title: "Раздел 1"
    text: "Описание раздела 1."
    images: ["https://example.com/section1.jpg"]
    children:
      - id: "1_1"
        title: "Подраздел 1.1"
        text: "Текст подраздела 1.1."
        images: ["images/1_1.png"]
        children: []
      - id: "1_2"
        title: "Подраздел 1.2"
        text: "Текст подраздела 1.2."
        children: []
  - id: "2"
    title: "Раздел 2"
    text: "Раздел 2 без картинки."
    children:
      - id: "2_1"
        title: "Подраздел 2.1"
        text: "Три картинки ниже."
        images:
          - "https://example.com/a.jpg"
          - "https://example.com/b.jpg"
          - "images/local.jpg"
        children: []
```

---

## 7. После изменений

- Файл читается при запуске бота и кэшируется в памяти.
- Чтобы изменения в `sections.yaml` применились, нужно **перезапустить бота**.
- Проверьте, что YAML корректен (нет лишних/незакрытых кавычек, правильные отступы), иначе при запуске может быть ошибка загрузки.
